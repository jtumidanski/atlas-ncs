package script

import (
	"errors"
	"sync"
)

type Registry struct {
	registry map[uint32]Script
}

var once sync.Once
var registry *Registry

func GetRegistry() *Registry {
	once.Do(func() {
		registry = initRegistry()
	})
	return registry
}

func initRegistry() *Registry {
	s := &Registry{make(map[uint32]Script)}
	s.addConversation(AFamiliarLady{})
	s.addConversation(APileOfBlueFlowers{})
	s.addConversation(APileOfFlowers{})
	s.addConversation(APileOfHerbs{})
	s.addConversation(APileOfPinkFlowers{})
	s.addConversation(APileOfWhiteFlowers{})
	s.addConversation(AceOfHearts{})
	s.addConversation(Agatha{})
	s.addConversation(Alcaster{})
	s.addConversation(Ali{})
	s.addConversation(Amon{})
	s.addConversation(AncientIcyStone{})
	s.addConversation(Arturo{})
	s.addConversation(ArwenTheFairy{})
	s.addConversation(AssistantBlue{})
	s.addConversation(AssistantBlue2{})
	s.addConversation(AssistantCheng{})
	s.addConversation(AssistantRed{})
	s.addConversation(AssistantRed2{})
	s.addConversation(AthenaPierce{})
	s.addConversation(AthenaPierceDemo{})
	s.addConversation(Aura{})
	s.addConversation(BabyMilkCow1{})
	s.addConversation(BabyMilkCow2{})
	s.addConversation(Bart{})
	s.addConversation(BigHeadward{})
	s.addConversation(BlockedEntrance{})
	s.addConversation(BowmanJobInstructor{})
	s.addConversation(BowmanJobInstructorExit{})
	s.addConversation(BranchSnowman{})
	s.addConversation(Brittany{})
	s.addConversation(Bush1{})
	s.addConversation(Bush2{})
	s.addConversation(Bush3{})
	s.addConversation(Bush4{})
	s.addConversation(Bush5{})
	s.addConversation(Carta{})
	s.addConversation(Casey{})
	s.addConversation(Chef{})
	s.addConversation(Cherry{})
	s.addConversation(ChiefTatamo{})
	s.addConversation(Chris{})
	s.addConversation(Cliff{})
	s.addConversation(Cloy{})
	s.addConversation(CornerOfTheMagicLibrary{})
	s.addConversation(CornerOfTheMagicLibrary2{})
	s.addConversation(CrumblingStatue{})
	s.addConversation(Cygnus{})
	s.addConversation(DancesWithBalrog{})
	s.addConversation(DancesWithBalrogDemo{})
	s.addConversation(DangerZoneTaxi{})
	s.addConversation(DarkLordDemo{})
	s.addConversation(DocumentRoll{})
	s.addConversation(Dolphin{})
	s.addConversation(Dunamis{})
	s.addConversation(Eckhart{})
	s.addConversation(EckhartStatue{})
	s.addConversation(Egnet{})
	s.addConversation(Eleanor{})
	s.addConversation(Erin{})
	s.addConversation(FallenKnight{})
	s.addConversation(FirstEOSRock{})
	s.addConversation(FourthEOSRock{})
	s.addConversation(Francis{})
	s.addConversation(Francois{})
	s.addConversation(Francis2{})
	s.addConversation(FranzTheOwner{})
	s.addConversation(Geras{})
	s.addConversation(GhostHunterBob{})
	s.addConversation(Gina{})
	s.addConversation(GrendelTheReallyOld{})
	s.addConversation(GrendelTheReallyOldDemo{})
	s.addConversation(HarpStringA{})
	s.addConversation(HarpStringB{})
	s.addConversation(HarpStringC{})
	s.addConversation(HarpStringD{})
	s.addConversation(HarpStringE{})
	s.addConversation(HarpStringF{})
	s.addConversation(HarpStringG{})
	s.addConversation(Hawkeye{})
	s.addConversation(HawkeyeStatue{})
	s.addConversation(Heena{})
	s.addConversation(HenesysForest{})
	s.addConversation(HenesysForest2{})
	s.addConversation(Heracle{})
	s.addConversation(HolyStone{})
	s.addConversation(HotelReceptionist{})
	s.addConversation(InsignificantBeing{})
	s.addConversation(Irena{})
	s.addConversation(IrenaStatue{})
	s.addConversation(IsaTheStationGuide{})
	s.addConversation(Jack{})
	s.addConversation(Jake{})
	s.addConversation(Jane{})
	s.addConversation(Jeff{})
	s.addConversation(JMFromThaStreetz{})
	s.addConversation(Joel{})
	s.addConversation(Karen{})
	s.addConversation(Kenta{})
	s.addConversation(KingPepe{})
	s.addConversation(Kiridu{})
	s.addConversation(Kiriko{})
	s.addConversation(KiriruEreve{})
	s.addConversation(KiruEreve{})
	s.addConversation(KiruToOrbis{})
	s.addConversation(KiruOrbis{})
	s.addConversation(Kiruru{})
	s.addConversation(KiriruEllinia{})
	s.addConversation(KyrinDemo{})
	s.addConversation(Lea{})
	s.addConversation(Lenario{})
	s.addConversation(Lira{})
	s.addConversation(Lisa{})
	s.addConversation(LordJonathan{})
	s.addConversation(Louis{})
	s.addConversation(Luke{})
	s.addConversation(MachineApparatus{})
	s.addConversation(MagicianJobInstructor{})
	s.addConversation(MagicianJobInstructorExit{})
	s.addConversation(MapleLeafMarble{})
	s.addConversation(MarTheFairy{})
	s.addConversation(MarkTheToySoldier{})
	s.addConversation(Mel{})
	s.addConversation(MetalBucketSnowman{})
	s.addConversation(Meteorite1{})
	s.addConversation(Meteorite2{})
	s.addConversation(Meteorite3{})
	s.addConversation(Meteorite4{})
	s.addConversation(Meteorite5{})
	s.addConversation(Meteorite6{})
	s.addConversation(Mihile{})
	s.addConversation(MihileStatue{})
	s.addConversation(Mimo{})
	s.addConversation(MinoTheOwner{})
	s.addConversation(MongFromKong{})
	s.addConversation(MonstrousLookingStatue{})
	s.addConversation(MotherMilkCow1{})
	s.addConversation(MotherMilkCow2{})
	s.addConversation(MrGoldstein{})
	s.addConversation(MrSmith{})
	s.addConversation(MrThunder{})
	s.addConversation(MsTan{})
	s.addConversation(Muirhat{})
	s.addConversation(MysteriousStatue{})
	s.addConversation(Nara{})
	s.addConversation(Natalie{})
	s.addConversation(NautilusMidSizedTaxi{})
	s.addConversation(Neinheart{})
	s.addConversation(NeinheartDemo{})
	s.addConversation(Neru{})
	s.addConversation(OlsonTheToySoldier{})
	s.addConversation(OrbisMagicSpot1{})
	s.addConversation(OrbisMagicSpot20{})
	s.addConversation(Oz{})
	s.addConversation(OzStatue{})
	s.addConversation(Papulatus{})
	s.addConversation(Pason{})
	s.addConversation(Pelace{})
	s.addConversation(Phil{})
	s.addConversation(PirateJobInstructorExit{})
	s.addConversation(Pison{})
	s.addConversation(PowerBForeBowman{})
	s.addConversation(PowerBForeEllinia{})
	s.addConversation(PowerBForeHenesys{})
	s.addConversation(PowerBForeKerningCity{})
	s.addConversation(PowerBForeMagician{})
	s.addConversation(PowerBForeNautilus{})
	s.addConversation(PowerBForePerion{})
	s.addConversation(PowerBForePirate{})
	s.addConversation(PowerBForeThief{})
	s.addConversation(PowerBForeWarrior{})
	s.addConversation(PrinceGiuseppe{})
	s.addConversation(Purin{})
	s.addConversation(PuroLithHarbor{})
	s.addConversation(PuroRien{})
	s.addConversation(PuroToLithHarbor{})
	s.addConversation(PuroToRien{})
	s.addConversation(Rain{})
	s.addConversation(Ramini{})
	s.addConversation(Refugee1{})
	s.addConversation(Refugee2{})
	s.addConversation(Refugee3{})
	s.addConversation(Refugee4{})
	s.addConversation(RegularCabEllinia{})
	s.addConversation(RegularCabHenesys{})
	s.addConversation(RegularCabKerningCity{})
	s.addConversation(RegularCabLithHarbor{})
	s.addConversation(RegularCabPerion{})
	s.addConversation(Rini{})
	s.addConversation(RobertHolly{})
	s.addConversation(Robin{})
	s.addConversation(Romi{})
	s.addConversation(Rooney{})
	s.addConversation(Rosey{})
	s.addConversation(Rupi{})
	s.addConversation(ScarfSnowman{})
	s.addConversation(SeargantAnderson{})
	s.addConversation(SecondEOSRock{})
	s.addConversation(Sera{})
	s.addConversation(ShamanRock1{})
	s.addConversation(ShamanRock2{})
	s.addConversation(Shane{})
	s.addConversation(Shanks{})
	s.addConversation(Shinsoo{})
	s.addConversation(ShinyStone{})
	s.addConversation(Shulynch{})
	s.addConversation(Shulynch2{})
	s.addConversation(Shuri{})
	s.addConversation(SmallTreeStump{})
	s.addConversation(SmallStreetLight{})
	s.addConversation(SparklingCrystal{})
	s.addConversation(Spiruna{})
	s.addConversation(StaffSeargantCharlie{})
	s.addConversation(StrangeLookingStatue{})
	s.addConversation(StrawHatSnowman{})
	s.addConversation(SubwayExit{})
	s.addConversation(SubwayTrashCan1{})
	s.addConversation(SubwayTrashCan2{})
	s.addConversation(SubwayTrashCan3{})
	s.addConversation(SubwayTrashCan4{})
	s.addConversation(Sunny{})
	s.addConversation(Tangyoon{})
	s.addConversation(TheTicketGate{})
	s.addConversation(ThiefJobInstructor{})
	s.addConversation(ThiefJobInstructorExit{})
	s.addConversation(ThirdEOSRock{})
	s.addConversation(ThreeRefugees{})
	s.addConversation(Tian{})
	s.addConversation(Tombstone{})
	s.addConversation(TrainerBartos{})
	s.addConversation(TrainerFrod{})
	s.addConversation(TrashCan{})
	s.addConversation(TreasureChestB1{})
	s.addConversation(TreasureChestB2{})
	s.addConversation(TreasureChestB3{})
	s.addConversation(TutorialLilin{})
	s.addConversation(TylusComplete{})
	s.addConversation(Vicious{})
	s.addConversation(VIPCabEllinia{})
	s.addConversation(VIPCabLithHarbor{})
	s.addConversation(WarriorJobInstructor{})
	s.addConversation(WarriorJobInstructorExit{})
	s.addConversation(WaterFilter{})
	s.addConversation(Weaver{})
	s.addConversation(Wisp{})
	s.addConversation(WolfGuard{})
	s.addConversation(YoungAthenaPierce{})
	return s
}

func (s *Registry) GetScript(npcId uint32) (*Script, error) {
	if val, ok := s.registry[npcId]; ok {
		return &val, nil
	}
	return nil, errors.New("unable to locate script")
}

func (s *Registry) addConversation(handler Script) {
	s.registry[handler.NPCId()] = handler
}
